<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>128. Longest Consecutive Sequence - è¦–è¦ºåŒ–æ¨¡æ“¬</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f9f9f9; padding: 2rem; }
    .container { background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 900px; margin: auto; }
    h2, h3 { color: #007acc; }
    input, button {
      padding: 8px; font-size: 14px; margin: 0.5rem 0.5rem 0 0;
      border: 1px solid #ccc; border-radius: 4px;
    }
    button { background-color: #007acc; color: white; border: none; cursor: pointer; }
    .number-box {
      display: inline-block; width: 40px; height: 40px;
      line-height: 40px; text-align: center; margin: 2px;
      border: 1px solid #ccc; border-radius: 4px;
    }
    .highlight { background-color: #4CAF50; color: white; font-weight: bold; }
    .active { outline: 3px solid red; }
    #sequenceBox { margin-top: 1rem; }
    .status-box {
      margin-top: 1rem; padding: 1rem;
      background: #eef5ff; border-left: 5px solid #007acc;
      font-family: monospace; white-space: pre-wrap;
      max-height: 300px; overflow-y: auto;
    }
    #codeBox {
      background: #272822; color: #f8f8f2; padding: 1rem;
      border-radius: 6px; margin-top: 2rem;
      font-family: monospace; white-space: pre-wrap;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>ğŸ“ 128. Longest Consecutive Sequence</h2>
  <h3>ğŸ“˜ é¡Œç›®æè¿°</h3>
  <p>
    çµ¦å®šä¸€å€‹æœªæ’åºçš„æ•´æ•¸é™£åˆ— numsï¼Œæ‰¾å‡ºæœ€é•·é€£çºŒåºåˆ—çš„é•·åº¦ã€‚è¦æ±‚æ¼”ç®—æ³•çš„æ™‚é–“è¤‡é›œåº¦ç‚º O(n)ã€‚
  </p>

  <h3>âœ… O(n) è§£æ³•æ€è·¯ï¼šä½¿ç”¨ HashSet + èµ·é»åˆ¤æ–·</h3>
  <ul>
    <li>ğŸ“Œ æ ¸å¿ƒæƒ³æ³•ï¼šæŠŠæ‰€æœ‰å…ƒç´ æ”¾é€² set ä¸­ï¼Œè®“æŸ¥æ‰¾è®Šæˆ O(1)</li>
    <li>å°æ–¼æ¯å€‹æ•¸å­— xï¼Œåªåœ¨å®ƒæ˜¯åºåˆ—é–‹é ­æ™‚æ‰å‘ä¸Šæ“´å±•</li>
    <li>å¦‚ä½•åˆ¤æ–· x æ˜¯èµ·é»ï¼Ÿå¦‚æœ x - 1 ä¸åœ¨ set è£¡ï¼Œä»£è¡¨ x æ˜¯ä¸€æ®µæ–°åºåˆ—çš„é–‹é ­</li>
    <li>å¾ x é–‹å§‹ï¼Œä¾åºæª¢æŸ¥ x+1, x+2, x+3, ... æ˜¯å¦å­˜åœ¨æ–¼ set</li>
    <li>è¨˜éŒ„ç›®å‰åºåˆ—é•·åº¦ï¼Œæ›´æ–°æœ€å¤§å€¼</li>
  </ul>

  <h3>ğŸ“ˆ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3>
  <ul>
    <li>æ™‚é–“è¤‡é›œåº¦ï¼šO(n) â€” æ¯å€‹å…ƒç´ æœ€å¤šåªæœƒè¢«è™•ç†ä¸€æ¬¡</li>
    <li>ç©ºé–“è¤‡é›œåº¦ï¼šO(n) â€” ä½¿ç”¨ Set å„²å­˜æ‰€æœ‰å…ƒç´ </li>
  </ul>

  <h3>ğŸ§ª è¼¸å…¥</h3>
  <input type="text" id="numsInput" value="[100, 4, 200, 1, 3, 2]" />
  <button onclick="init()">ğŸ”ƒ é‡è¨­</button>
  <button onclick="step()">ğŸ§­ ä¸‹ä¸€æ­¥</button>
  <button onclick="autoPlay()">â–¶ï¸ è‡ªå‹•æ’­æ”¾</button>
  <p id="resultInfo"></p>
  <div id="sequenceBox"></div>
  <div class="status-box" id="debugBox"></div>
  <h3>ğŸ“„ ç¨‹å¼ç¢¼</h3>
  <div id="codeBox"></div>
</div>

<script>
const code = `class Solution:
    def longestConsecutive(self, nums: List[int]) -> int:
        num_set = set(nums)
        longest = 0

        for n in nums:
            if n - 1 not in num_set:
                length = 1
                while n + length in num_set:
                    length += 1
                longest = max(longest, length)

        return longest`;

document.getElementById("codeBox").innerText = code;

let nums = [], numSet = new Set(), currentIndex = 0, longest = 0, maxSeq = [];
let intervalId = null;

function init() {
  nums = JSON.parse(document.getElementById("numsInput").value);
  numSet = new Set(nums);
  currentIndex = 0;
  longest = 0;
  maxSeq = [];
  document.getElementById("resultInfo").innerText = "";
  document.getElementById("debugBox").innerText = "";
  renderBoxes([], -1);
}

function renderBoxes(highlightSeq = [], activeIndex = -1) {
  const container = document.getElementById("sequenceBox");
  container.innerHTML = "";
  nums.forEach((n, idx) => {
    const box = document.createElement("div");
    box.className = "number-box";
    if (highlightSeq.includes(n)) box.classList.add("highlight");
    if (idx === activeIndex) box.classList.add("active");
    box.innerText = n;
    container.appendChild(box);
  });
}

function step() {
  if (currentIndex >= nums.length) {
    document.getElementById("resultInfo").innerText = `âœ… æœ€é•·é€£çºŒåºåˆ—é•·åº¦ç‚ºï¼š${longest}`;
    renderBoxes(maxSeq);
    if (intervalId) clearInterval(intervalId);
    return;
  }

  const n = nums[currentIndex];
  let sequence = [];
  if (!numSet.has(n - 1)) {
    let currentNum = n;
    let streak = 1;
    sequence = [n];
    while (numSet.has(currentNum + 1)) {
      currentNum++;
      streak++;
      sequence.push(currentNum);
    }
    if (streak > longest) {
      longest = streak;
      maxSeq = [...sequence];
    }
    document.getElementById("debugBox").innerText += `åºåˆ—ï¼š${sequence.join(" â†’ ")}ï¼ˆé•·åº¦: ${streak}ï¼‰\n`;
  } else {
    document.getElementById("debugBox").innerText += `è·³é ${n}ï¼Œä¸æ˜¯åºåˆ—èµ·é»\n`;
  }
  renderBoxes(sequence, currentIndex);
  currentIndex++;
}

function autoPlay() {
  if (intervalId) clearInterval(intervalId);
  intervalId = setInterval(step, 800);
}

init();
</script>
</body>
</html>
