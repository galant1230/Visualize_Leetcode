<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>11. Container With Most Water æ·±åº¦è§£æèˆ‡ç‹€æ…‹è¿½è¹¤</title>
  <style>
    :root {
      --primary: #64ffda; --accent: #007acc; --bg: #0a192f;
      --card-bg: #112240; --text: #ccd6f6; --text-dim: #8892b0; --success: #2ecc71; --highlight: #f39c12;
    }
    body {
      font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif; background: var(--bg);
      color: var(--text); padding: 20px; margin: 0; line-height: 1.6;
    }
    .dashboard { max-width: 1250px; margin: auto; display: grid; grid-template-columns: 1.2fr 1fr; gap: 20px; }
    .card { background: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    .full-width { grid-column: span 2; }
    h2, h3 { color: var(--primary); margin-top: 0; border-bottom: 1px solid #233554; padding-bottom: 10px; }

    /* é¡Œç›®è§£æèˆ‡å…¬å¼ */
    .info-box { background: rgba(100, 255, 218, 0.05); border-left: 5px solid var(--primary); padding: 15px; margin: 10px 0; border-radius: 0 8px 8px 0; font-size: 0.95rem; }
    .formula { font-size: 1.2rem; color: var(--primary); text-align: center; margin: 15px 0; font-weight: bold; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 8px; }

    /* ç‹€æ…‹é¡¯ç¤ºé¢æ¿ */
    .status-panel { 
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; 
      margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid #233554;
    }
    .status-item { text-align: center; }
    .status-label { font-size: 0.8rem; color: var(--text-dim); display: block; }
    .status-value { font-size: 1.1rem; color: var(--highlight); font-family: 'Consolas', monospace; font-weight: bold; }

    /* æŸ±ç‹€åœ–è¦–è¦ºåŒ– */
    .chart-container {
      height: 250px; display: flex; align-items: flex-end; justify-content: center;
      gap: 12px; margin: 60px 0 30px 0; border-bottom: 2px solid #233554; position: relative;
    }
    .bar {
      width: 35px; background: #233554; position: relative; transition: all 0.3s ease;
      display: flex; justify-content: center;
    }
    .bar.active { background: var(--accent); }
    .bar.winner { background: var(--success) !important; box-shadow: 0 0 20px var(--success); }
    .bar::after { content: attr(data-h); position: absolute; top: -30px; font-weight: bold; color: var(--text); }
    .bar.winner::before { content: "â­"; position: absolute; top: -55px; }
    
    .water-overlay {
      position: absolute; background: rgba(100, 255, 218, 0.2); 
      border-top: 3px solid var(--primary); transition: all 0.4s ease;
    }

    /* æ§åˆ¶èˆ‡çµæœ */
    .controls { text-align: center; margin-bottom: 20px; }
    input { background: var(--bg); border: 2px solid var(--accent); color: var(--primary); padding: 10px 20px; border-radius: 25px; outline: none; width: 250px; }
    button { background: var(--accent); border: none; color: white; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; }
    
    .final-result { 
      font-size: 1.4rem; color: var(--success); font-weight: bold; 
      padding: 15px; border: 2px solid var(--success); border-radius: 10px; 
      display: none; margin-top: 10px; text-align: center; background: rgba(46, 204, 113, 0.1);
    }

    /* ä»£ç¢¼è¦–çª— */
    .code-window { background: #011627; padding: 20px; border-radius: 8px; font-family: 'Consolas', monospace; font-size: 0.95rem; }
    .line { white-space: pre; border-left: 4px solid transparent; padding-left: 12px; color: #82aaff; }
    .active-line { background: #1d3b53; border-left-color: var(--primary); color: #fff; }
  </style>
</head>
<body>

<div class="dashboard">
  <div class="card full-width">
    <h2>ğŸŒŠ 11. Container With Most Water (ç››æœ€å¤šæ°´çš„å®¹å™¨)</h2>
    
    <div class="info-box">
      <strong>é¡Œç›®ç¯„ä¾‹ï¼š</strong>è¼¸å…¥ height = [1, 8, 6, 2, 5, 4, 8, 3, 7] â” è¼¸å‡º: <strong>49</strong><br>
      <strong>è§£é‡‹ï¼š</strong>é¸æ“‡ç´¢å¼• 1 (é«˜ 8) èˆ‡ç´¢å¼• 8 (é«˜ 7)ï¼Œå¯¬åº¦ 8-1=7ã€‚é¢ç© = min(8, 7) * 7 = 49ã€‚
    </div>

    <div class="formula">é¢ç© = min(height[l], height[r]) Ã— (r - l)</div>

    <div class="status-panel">
      <div class="status-item"><span class="status-label">Pointers (l, r)</span><span id="stat-lr" class="status-value">0, 0</span></div>
      <div class="status-item"><span class="status-label">Heights (h[l], h[r])</span><span id="stat-h" class="status-value">0, 0</span></div>
      <div class="status-item"><span class="status-label">Width (r - l)</span><span id="stat-w" class="status-value">0</span></div>
      <div class="status-item"><span class="status-label">Min Height</span><span id="stat-minh" class="status-value">0</span></div>
      <div class="status-item"><span class="status-label">Current Area</span><span id="stat-area" class="status-value">0</span></div>
      <div class="status-item"><span class="status-label">MAX Area</span><span id="stat-max" class="status-value" style="color:var(--success)">0</span></div>
    </div>

    <div class="controls">
      è¼¸å…¥é«˜åº¦é™£åˆ—: <input type="text" id="inputHeights" value="1,8,6,2,5,4,8,3,7">
      <button onclick="initSim()">é‡ç½®</button>
      <button id="stepBtn" onclick="step()">åŸ·è¡Œä¸‹ä¸€æ­¥ (Step)</button>
    </div>
  </div>

  <div class="card">
    <h3>ğŸ” è¦–è¦ºåŒ–èˆ‡çµæœ</h3>
    <div class="chart-container" id="chart"></div>
    <div id="finalBox" class="final-result"></div>
  </div>

  <div class="card">
    <h3>ğŸ Python å¯¦ä½œ (æ¨™æº–ç¸®æ’)</h3>
    <div class="code-window">
<div class="line" id="l1">class Solution:</div>
<div class="line" id="l2">    def maxArea(self, height):</div>
<div class="line" id="l3">        max_area = 0</div>
<div class="line" id="l4">        l, r = 0, len(height) - 1</div>
<div class="line" id="l5">        while l < r:</div>
<div class="line" id="l7">            area = (r - l) * min(height[l], height[r])</div>
<div class="line" id="l8">            max_area = max(max_area, area)</div>
<div class="line" id="l10">            if height[l] < height[r]:</div>
<div class="line" id="l11">                l += 1</div>
<div class="line" id="l12">            else:</div>
<div class="line" id="l13">                r -= 1</div>
<div class="line" id="l14">        return max_area</div>
    </div>
    <div style="margin-top:15px; font-size:0.85rem; color:var(--text-dim)">
        <strong>æ ¸å¿ƒæ€è·¯ï¼š</strong>æ°´é¢é«˜åº¦å—é™æ–¼è¼ƒçŸ®çš„ä¸€å´ã€‚ç§»å‹•è¼ƒçŸ­çš„ä¸€å´æ˜¯å”¯ä¸€ã€Œå¯¬åº¦è®Šå°ä½†é«˜åº¦å¯èƒ½å¢åŠ ã€é€²è€Œæå‡é¢ç©çš„æ©Ÿæœƒã€‚
    </div>
  </div>
</div>

<script>
let height = [], l = 0, r = 0, maxArea = 0, bestL = 0, bestR = 0;

function initSim() {
  const rawInput = document.getElementById("inputHeights").value;
  height = rawInput.split(",").map(Number).filter(n => !isNaN(n));
  l = 0; r = height.length - 1; maxArea = 0;
  document.getElementById("finalBox").style.display = "none";
  document.getElementById("stepBtn").disabled = false;
  updateStatus(0, 0, 0, 0);
  clearHighlight();
  render();
}

function updateStatus(curArea, hMin, w, isEnd = false) {
  document.getElementById("stat-lr").innerText = `${l}, ${r}`;
  document.getElementById("stat-h").innerText = `${height[l] || 0}, ${height[r] || 0}`;
  document.getElementById("stat-w").innerText = w;
  document.getElementById("stat-minh").innerText = hMin;
  document.getElementById("stat-area").innerText = curArea;
  document.getElementById("stat-max").innerText = maxArea;
}

function render(isFinal = false) {
  const chart = document.getElementById("chart");
  chart.innerHTML = "";
  const maxVal = Math.max(...height);
  
  height.forEach((h, idx) => {
    const bar = document.createElement("div");
    bar.className = "bar";
    if (isFinal && (idx === bestL || idx === bestR)) bar.className += " winner";
    else if (!isFinal && (idx === l || idx === r)) bar.className += " active";
    bar.style.height = (h / maxVal * 200) + "px";
    bar.setAttribute("data-h", h);
    chart.appendChild(bar);
  });

  if (l < r && !isFinal) {
    const overlay = document.createElement("div");
    overlay.className = "water-overlay";
    const hMin = Math.min(height[l], height[r]);
    const chartWidth = chart.clientWidth;
    const barW = 35 + 12; 
    const offset = (chartWidth - (height.length * barW)) / 2;
    overlay.style.left = (offset + l * barW) + "px";
    overlay.style.width = ((r - l) * barW + 35) + "px";
    overlay.style.height = (hMin / maxVal * 200) + "px";
    chart.appendChild(overlay);
  }
}

function step() {
  if (l >= r) return;

  const hL = height[l], hR = height[r];
  const hMin = Math.min(hL, hR);
  const w = r - l;
  const area = hMin * w;
  
  if (area > maxArea) {
    maxArea = area;
    bestL = l;
    bestR = r;
  }

  updateStatus(area, hMin, w);

  clearHighlight();
  document.getElementById("l7").classList.add("active-line");

  setTimeout(() => {
    clearHighlight();
    document.getElementById("l8").classList.add("active-line");
    
    setTimeout(() => {
        clearHighlight();
        if (hL < hR) {
          document.getElementById("l11").classList.add("active-line");
          l++;
        } else {
          document.getElementById("l13").classList.add("active-line");
          r--;
        }
        render();
        if (l >= r) {
          document.getElementById("stepBtn").disabled = true;
          render(true);
          const fb = document.getElementById("finalBox");
          fb.innerHTML = `ğŸ‰ æœ€çµ‚æœ€å¤§é¢ç©: ${maxArea}<br><small>ç”±ç´¢å¼• ${bestL}(é«˜${height[bestL]}) èˆ‡ ${bestR}(é«˜${height[bestR]}) çµ„æˆ</small>`;
          fb.style.display = "block";
        }
    }, 300);
  }, 300);
}

function clearHighlight() {
  document.querySelectorAll(".line").forEach(el => el.classList.remove("active-line"));
}

initSim();
</script>
</body>
</html>