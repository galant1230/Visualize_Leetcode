<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Remove Duplicates å¯è¦–åŒ–æ¨¡æ“¬å™¨</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      padding: 2rem;
      margin: 0;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    h2, h3 {
      color: #007acc;
    }
    table {
      margin: 1rem auto;
      border-collapse: collapse;
      width: 100%;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 8px;
      font-size: 14px;
      text-align: center;
    }
    .written {
      background-color: #4caf50;
      color: white;
    }
    .pointer {
      color: red;
      font-weight: bold;
    }
    #codeBox {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      margin: 2rem 0;
      font-family: monospace;
    }
    .code-line {
      padding: 2px 0;
    }
    .active-code {
      background-color: #444;
    }
    button {
      padding: 8px 16px;
      font-size: 14px;
      margin: 0.3rem;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      background: #007acc;
      color: white;
    }
    input {
      padding: 6px;
      margin: 0.2rem;
      width: 300px;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>ğŸ§¹ 26. ç§»é™¤æ’åºé™£åˆ—ä¸­çš„é‡è¤‡é …ç›®</h2>
  <hr>
  <h3>ğŸ“˜ é¡Œç›®æè¿°</h3>
  <p>çµ¦å®šä¸€å€‹<strong>å·²æ’åº</strong>çš„æ•´æ•¸é™£åˆ— <code>nums</code>ï¼Œè«‹<strong>å°±åœ°</strong>ç§»é™¤é‡è¤‡çš„å…ƒç´ ï¼Œä½¿æ¯å€‹å…ƒç´ åªå‡ºç¾ä¸€æ¬¡ï¼Œä¸¦è¿”å›æ–°é™£åˆ—çš„é•·åº¦ <code>k</code>ã€‚</p>
  <p>ä½ å¿…é ˆä½¿ç”¨ O(1) é¡å¤–ç©ºé–“ä¸¦å°±åœ°ä¿®æ”¹è¼¸å…¥é™£åˆ—ã€‚</p>

  <hr>
  <h3>ğŸ§ª ç¯„ä¾‹</h3>
  <pre><code>è¼¸å…¥: nums = [0,0,1,1,1,2,2,3,3,4]
è¼¸å‡º: 5, nums = [0,1,2,3,4,_,_,_,_,_]</code></pre>

  <hr>
  <h3>â³ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3>
  <ul>
    <li><strong>æ™‚é–“è¤‡é›œåº¦ï¼š</strong> O(n)</li>
    <li><strong>ç©ºé–“è¤‡é›œåº¦ï¼š</strong> O(1)</li>
  </ul>

  <hr>
  <h3>â–¶ï¸ æ¨¡æ“¬å™¨</h3>
  <div>
    <label>è¼¸å…¥ nums: <input type="text" id="numsInput" value="0,0,1,1,1,2,2,3,3,4"></label>
    <button onclick="startSim()">ğŸ”ƒ é‡è¨­</button>
    <button onclick="stepSim()">ğŸ§­ ä¸‹ä¸€æ­¥</button>
  </div>

  <table id="stepTable">
    <thead>
    <tr><th>read</th><th>write</th><th>nums[read]</th><th>å‹•ä½œ</th><th>ç›®å‰ nums</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>ğŸ“ é™£åˆ—ç‹€æ…‹</h3>
  <table id="arrayState"></table>

  <div id="codeBox">
    <div class="code-line">1: if not nums: return 0</div>
    <div class="code-line">2: write = 1</div>
    <div class="code-line">3: for read in range(1, len(nums)):</div>
    <div class="code-line">4:&nbsp;&nbsp;&nbsp;&nbsp;if nums[read] != nums[read - 1]:</div>
    <div class="code-line">5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nums[write] = nums[read]</div>
    <div class="code-line">6:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write += 1</div>
    <div class="code-line">7: return write</div>
  </div>
</div>

<script>
  let nums = [], read = 1, write = 1;
  const tbody = document.querySelector("#stepTable tbody");
  const codeLines = document.querySelectorAll(".code-line");
  const arrayTable = document.getElementById("arrayState");

  function highlight(line) {
    codeLines.forEach((l, idx) => l.classList.toggle("active-code", idx === line - 1));
  }

  function renderArrayState() {
    arrayTable.innerHTML = "";
    const row1 = document.createElement("tr");
    const row2 = document.createElement("tr");
    for (let i = 0; i < nums.length; i++) {
      const cell1 = document.createElement("td");
      cell1.textContent = nums[i];
      row1.appendChild(cell1);
      const cell2 = document.createElement("td");
      if (i === read && i === write) cell2.innerHTML = '<span class="pointer">R/W</span>';
      else if (i === read) cell2.innerHTML = '<span class="pointer">R</span>';
      else if (i === write) cell2.innerHTML = '<span class="pointer">W</span>';
      else cell2.innerHTML = "&nbsp;";
      row2.appendChild(cell2);
    }
    arrayTable.appendChild(row1);
    arrayTable.appendChild(row2);
  }

  function startSim() {
    nums = document.getElementById("numsInput").value.split(',').map(x => parseInt(x.trim()));
    read = 1;
    write = 1;
    tbody.innerHTML = "";
    highlight(2);
    renderArrayState();
  }

  function stepSim() {
    if (read >= nums.length) return;
    highlight(4);
    let action = "";
    if (nums[read] !== nums[read - 1]) {
      highlight(5);
      nums[write] = nums[read];
      action = `nums[${write}] = ${nums[read]}`;
      write++;
      highlight(6);
    } else {
      action = `è·³éé‡è¤‡å€¼ ${nums[read]}`;
    }

    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${read}</td>
      <td>${write}</td>
      <td>${nums[read]}</td>
      <td>${action}</td>
      <td>${nums.join(', ')}</td>
    `;
    tbody.appendChild(row);
    read++;
    renderArrayState();
  }
</script>
</body>
</html>
