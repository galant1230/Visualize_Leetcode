<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>Unique Paths Visualizer</title>
    <style>
        :root {
            --bg: #0d1117; --card: #161b22; --accent: #58a6ff;
            --pacific: #1f6feb; --atlantic: #238636; --energy: #d29922; --danger: #f85149;
            --editor-bg: #010409; --text: #c9d1d9; --dim: #8b949e;
            --keyword: #ff7b72; --hl: rgba(88, 166, 255, 0.15);
        }
        body { font-family: 'Consolas', monospace; background: var(--bg); color: var(--text); margin: 0; padding: 15px; overflow: hidden; }
        .container { max-width: 1650px; margin: auto; display: grid; grid-template-columns: 380px 1fr 480px; gap: 15px; height: 95vh; }

        /* å·¦å´è³‡è¨Š */
        .side-panel { background: var(--card); border: 1px solid #30363d; border-radius: 12px; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .info-card { background: #010409; border: 1px solid #30363d; padding: 12px; border-radius: 8px; font-size: 13px; line-height: 1.5; }
        .ex-box { background: #161b22; border-left: 3px solid var(--accent); padding: 8px; margin-top: 8px; font-size: 12px; color: var(--dim); }

        /* ä¸­é–“ç¶²æ ¼æ ¸å¿ƒ */
        .main-panel { background: #010409; border: 1px solid #30363d; border-radius: 12px; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .grid-container { 
            display: grid; gap: 8px; margin: auto; padding: 20px; background: var(--card); border-radius: 8px; border: 1px solid #333;
            position: relative;
        }
        .cell {
            width: 60px; height: 60px; border: 1px solid #30363d; border-radius: 4px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; font-weight: bold; background: #0d1117; transition: all 0.3s; position: relative;
        }
        .cell.start { border: 2px solid var(--pacific); color: var(--pacific); }
        .cell.end { border: 2px solid var(--energy); color: var(--energy); }
        .cell.active { border-color: var(--accent); background: var(--hl); transform: scale(1.05); z-index: 5; }
        .cell.source { border-color: var(--atlantic); color: var(--atlantic); background: rgba(35, 134, 54, 0.1); }
        .cell.filled { color: #fff; }

        /* å³å´ IDE */
        .editor { background: var(--editor-bg); border: 1px solid #30363d; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; }
        .code-header { background: #161b22; padding: 10px 15px; border-bottom: 1px solid #30363d; font-size: 12px; }
        .ln { white-space: pre; padding: 0 15px 0 60px; position: relative; line-height: 1.8; font-size: 14px; }
        .ln-num { position: absolute; left: 0; width: 45px; text-align: right; color: #484f58; padding-right: 15px; }
        .ln-active { background: var(--hl); border-left: 4px solid var(--accent); }
        .kw { color: var(--keyword); }

        .toolbar { grid-column: span 3; background: var(--card); padding: 12px 20px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #30363d; }
        .btn { background: var(--pacific); color: white; border: none; padding: 8px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        
        /* ç®­é ­æŒ‡ç¤º */
        .cell::before { content: attr(data-label); position: absolute; top: -18px; font-size: 10px; color: var(--dim); font-weight: normal; }
    </style>
</head>
<body>

<div class="container">
    <div class="toolbar">
        <div style="font-weight:bold; color:var(--accent); font-size:18px;">62. Unique Paths (2D DP Visualizer)</div>
        <div style="display:flex; gap:12px;">
            m: <input type="number" id="mIn" value="3" style="width:40px; background:#000; color:var(--accent); border:1px solid #444;">
            n: <input type="number" id="nIn" value="7" style="width:40px; background:#000; color:var(--accent); border:1px solid #444;">
            <button class="btn" onclick="next()">ä¸‹ä¸€æ­¥ ğŸ§­</button>
            <button class="btn" style="background:#21262d" onclick="init()">é‡ç½®</button>
        </div>
    </div>

    <div class="side-panel">
        <div class="info-card">
            <b style="color:var(--accent)">ğŸ“– é¡Œç›®æ•˜è¿°</b><br>
            ä¸€å€‹æ©Ÿå™¨äººä½æ–¼ m * n ç¶²æ ¼çš„å·¦ä¸Šè§’ã€‚æ©Ÿå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–å‘å³ç§»å‹•ä¸€æ­¥ï¼Œè«‹å•åˆ°é”å³ä¸‹è§’æœ‰å¤šå°‘æ¢å”¯ä¸€çš„è·¯å¾‘ï¼Ÿ
        </div>
        <div class="info-card">
            <b style="color:var(--energy)">ğŸ’¡ ç¯„ä¾‹æ¸¬è³‡</b>
            <div class="ex-box"><b>Ex 1:</b> m=3, n=7 â†’ <b>28</b></div>
            <div class="ex-box"><b>Ex 2:</b> m=3, n=2 â†’ <b>3</b></div>
            <div class="ex-box"><b>Ex 3:</b> m=7, n=3 â†’ <b>28</b></div>
        </div>
        <div class="info-card">
            <b style="color:var(--atlantic)">ğŸ§  è§£æ³•æ€è·¯</b><br>
            <code>dp[i][j]</code>: åˆ°é”é» (i, j) çš„è·¯å¾‘æ•¸ã€‚<br>
            æ©Ÿå™¨äººåªèƒ½å¾<b>ä¸Šæ–¹</b>æˆ–<b>å·¦æ–¹</b>èµ°éä¾†ï¼š<br>
            <code style="color:var(--energy)">dp[i][j] = dp[i-1][j] + dp[i][j-1]</code><br>
            <i style="color:var(--dim)">* ç¬¬ä¸€è¡Œèˆ‡ç¬¬ä¸€åˆ—çš„è·¯å¾‘æ•¸çš†ç‚º 1ã€‚</i>
        </div>
        <div class="info-card">
            <span class="tag">æ™‚é–“: O(m*n)</span><span class="tag">ç©ºé–“: O(m*n)</span>
        </div>
    </div>

    <div class="main-panel">
        <div id="grid" class="grid-container"></div>
        <div class="viz-area" style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:20px;">
            <div style="font-size:12px; color:var(--dim); letter-spacing: 2px;">TOTAL UNIQUE PATHS</div>
            <div id="resVal" style="font-size:72px; font-weight:bold; color:var(--energy)">0</div>
            <div id="log" style="color:var(--accent); font-size:14px; margin-top:15px; font-family: 'Consolas'; font-weight: bold;"></div>
        </div>
    </div>

    <div class="editor">
        <div class="code-header"><span style="color:var(--accent)">unique_paths.py</span></div>
        <div id="codeView" class="code-body"></div>
    </div>
</div>

<script>
const codeLines = [
    "dp = [[1] * n for _ in range(m)]",
    "for i in range(1, m):",
    "    for j in range(1, n):",
    "        dp[i][j] = dp[i-1][j] + dp[i][j-1]",
    "return dp[m-1][n-1]"
];

let it;
function init() {
    const m = parseInt(document.getElementById('mIn').value);
    const n = parseInt(document.getElementById('nIn').value);
    
    const grid = document.getElementById('grid');
    grid.style.gridTemplateColumns = `repeat(${n}, 60px)`;
    grid.innerHTML = '';
    
    for(let i=0; i<m; i++) {
        for(let j=0; j<n; j++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.id = `cell-${i}-${j}`;
            cell.innerText = (i === 0 || j === 0) ? '1' : '0';
            if(i === 0 && j === 0) cell.classList.add('start');
            if(i === m-1 && j === n-1) cell.classList.add('end');
            grid.appendChild(cell);
        }
    }

    document.getElementById('codeView').innerHTML = codeLines.map((l, i) => {
        const formatted = l.replace(/for|in|range|return/g, '<span class="kw">$&</span>');
        return `<div class="ln" id="ln-${i}"><span class="ln-num">${i+1}</span>${formatted}</div>`;
    }).join('');

    it = pathLogic(m, n);
    document.getElementById('resVal').innerText = "1";
    document.getElementById('log').innerText = "> åˆå§‹åŒ–ç¬¬ä¸€è¡Œèˆ‡ç¬¬ä¸€åˆ—ç‚º 1";
}

function* pathLogic(m, n) {
    const dp = Array.from({ length: m }, () => Array(n).fill(1));
    yield { ln: 0, m: "åŸºç¤ç‹€æ…‹ï¼šæ©Ÿå™¨äººæ²¿é‚Šç•Œèµ°åªæœ‰ 1 ç¨®æ–¹å¼" };

    for (let i = 1; i < m; i++) {
        for (let j = 1; j < n; j++) {
            yield { ln: 2, i, j, m: `è¨ˆç®— dp[${i}][${j}]` };
            dp[i][j] = dp[i-1][j] + dp[i][j-1];
            yield { ln: 3, i, j, val: dp[i][j], m: `dp[${i}][${j}] = ${dp[i-1][j]} (ä¸Š) + ${dp[i][j-1]} (å·¦) = ${dp[i][j]}`, filled: true };
        }
    }
    yield { ln: 4, res: dp[m-1][n-1], m: "åˆ°é”çµ‚é»ï¼" };
}

function next() {
    const s = it.next();
    if (s.done) return;
    const { ln, i, j, val, res, m, filled } = s.value;

    document.querySelectorAll('.ln').forEach(e => e.classList.remove('ln-active'));
    document.getElementById(`ln-${ln}`).classList.add('ln-active');

    document.querySelectorAll('.cell').forEach(e => e.classList.remove('active', 'source'));

    if (i !== undefined && j !== undefined) {
        const current = document.getElementById(`cell-${i}-${j}`);
        current.classList.add('active');
        
        // æ¨™ç¤ºä¾†æº
        document.getElementById(`cell-${i-1}-${j}`).classList.add('source');
        document.getElementById(`cell-${i}-${j-1}`).classList.add('source');

        if (filled) {
            current.innerText = val;
            current.classList.add('filled');
        }
    }
    
    if (res) document.getElementById('resVal').innerText = res;
    document.getElementById('log').innerText = `> ${m}`;
}

init();
</script>
</body>
</html>
