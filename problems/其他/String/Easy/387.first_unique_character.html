<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LeetCode 387 - First Unique Character in a String è¦–è¦ºåŒ–æ•™å­¸ (æ›´æ–°ç‰ˆ)</title>
  <style>
    body { font-family: sans-serif; background: #f5f7fa; padding: 2rem; }
    h1 { text-align: center; color: #007acc; }
    .section {
      max-width: 900px;
      margin: 1rem auto;
      background: white;
      padding: 1.5rem 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    pre {
      background: #272822;
      color: #f8f8f2;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: monospace;
    }
    .code-line { padding: 2px 0; }
    .active-code { background: #444; color: white; }
    .tips {
      background: #fef7dc;
      padding: 1rem;
      border-left: 6px solid #f1c40f;
      border-radius: 6px;
      margin-top: 1rem;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.75rem; text-align: center; }
    .btn-group { text-align: center; margin-top: 1rem; }
    button {
      background: #007acc;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
    .freq-box {
      display: flex;
      justify-content: center;
      flex-wrap: nowrap;
      overflow-x: auto;
      margin-top: 1rem;
      font-family: monospace;
    }
    .freq-item {
      width: 30px;
      height: 30px;
      line-height: 30px;
      border: 1px solid #ccc;
      margin: 2px;
      border-radius: 4px;
      text-align: center;
      background: #ecf0f1;
    }
  </style>
</head>
<body>

<h1>LeetCode 387 - First Unique Character in a String è¦–è¦ºåŒ–æ•™å­¸ (æ›´æ–°ç‰ˆ)</h1>

<div class="section">
  <h2>ğŸ“– é¡Œç›®æè¿°</h2>
  <p>
    çµ¦å®šä¸€å€‹å­—ä¸² <code>s</code>ï¼Œæ‰¾å‡ºç¬¬ä¸€å€‹ä¸é‡è¤‡çš„å­—ç¬¦ï¼Œä¸¦è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœæ²’æœ‰ä¸é‡è¤‡çš„å­—ç¬¦ï¼Œå‰‡è¿”å› -1ã€‚
  </p>
  <p>
    ç¯„ä¾‹ï¼šs = "loveleetcode" â†’ è¼¸å‡º 2 ï¼ˆ'v' ç‚ºç¬¬ä¸€å€‹ä¸é‡è¤‡çš„å­—ç¬¦ï¼‰
  </p>
</div>

<div class="section">
  <h2>ğŸ§  è§£é¡Œæ€è·¯</h2>
  <ol>
    <li>éæ­·å­—ä¸²ï¼Œåˆ©ç”¨å­—å…¸çµ±è¨ˆæ¯å€‹å­—ç¬¦å‡ºç¾çš„æ¬¡æ•¸ã€‚</li>
    <li>å†æ¬¡éæ­·å­—ä¸²ï¼Œæ‰¾åˆ°ç¬¬ä¸€å€‹è¨ˆæ•¸ç‚º 1 çš„å­—ç¬¦ï¼Œè¿”å›å…¶ç´¢å¼•ï¼›è‹¥ç„¡å‰‡è¿”å› -1ã€‚</li>
  </ol>
  <p>
    æ­¤æ–¹æ³•æ™‚é–“è¤‡é›œåº¦ç‚º O(n)ï¼Œç©ºé–“è¤‡é›œåº¦ç‚º O(1)ï¼ˆå› ç‚ºå­—æ¯ç¨®é¡å›ºå®šç‚º 26ï¼‰ã€‚
  </p>
</div>

<div class="section">
  <h2>ğŸ”¢ äº’å‹•æ¨¡æ“¬</h2>
  <div class="btn-group">
    <label>è¼¸å…¥å­—ä¸² sï¼š<input type="text" id="inputStr" value="loveleetcode"></label>
    <button onclick="startSimulation()">é–‹å§‹æ¨¡æ“¬</button>
    <button onclick="nextStep()">ä¸‹ä¸€æ­¥</button>
  </div>
  <p id="simOutput" style="text-align:center; font-weight:bold;">æ¨¡æ“¬ç‹€æ…‹</p>
  <h3 style="text-align:center;">å­—æ¯é »ç‡é™£åˆ— (a-z)ï¼š</h3>
  <div class="freq-box" id="freqBox"></div>
</div>

<div class="section">
  <h2>ğŸ’» ç¨‹å¼ç¢¼å±•ç¤º (Python è§£æ³•)</h2>
  <pre id="codeBox">
class Solution:
    def firstUniqChar(self, s: str) -> int:
        my_dict = {}
        for char in s:
            if char in my_dict:
                my_dict[char] += 1
            else:
                my_dict[char] = 1
        
        for index, char in enumerate(s):
            if my_dict[char] == 1:
                return index
        
        return -1
  </pre>
  <div class="tips">
    ğŸ’¡ å°æŠ€å·§ï¼šå…ˆçµ±è¨ˆé »ç‡ï¼Œå†æ‰¾ç¬¬ä¸€å€‹åªå‡ºç¾ä¸€æ¬¡çš„å­—ç¬¦ã€‚ç”±æ–¼è‹±æ–‡å­—æ¯æ•¸é‡å›ºå®šï¼Œç©ºé–“è¤‡é›œåº¦è¦–ç‚º O(1)ã€‚
  </div>
</div>

<div class="section">
  <h2>â±ï¸ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h2>
  <table>
    <tr>
      <th>æ–¹æ³•</th>
      <th>æ™‚é–“è¤‡é›œåº¦</th>
      <th>ç©ºé–“è¤‡é›œåº¦</th>
    </tr>
    <tr>
      <td>å­—å…¸çµ±è¨ˆ + éæ­·</td>
      <td>O(n)</td>
      <td>O(1) (æœ€å¤š 26 å­—æ¯)</td>
    </tr>
  </table>
</div>

<script>
// å…¨åŸŸè®Šæ•¸
let sStr = "";
let myDict = {};
let simPhase = 0; // 0: çµ±è¨ˆé »ç‡, 1: æª¢æŸ¥ç¬¬ä¸€å€‹ä¸é‡è¤‡å­—ç¬¦
let simIndex = 0;
const simOutput = document.getElementById("simOutput");
const freqBox = document.getElementById("freqBox");

// æ›´æ–°é »ç‡é¡¯ç¤º
function updateFreqDisplay() {
  freqBox.innerHTML = "";
  for (let i = 0; i < 26; i++) {
    const div = document.createElement("div");
    div.className = "freq-item";
    // å°æ‡‰å­—æ¯ a~z
    div.innerText = String.fromCharCode(97 + i) + ":" + (myDict[String.fromCharCode(97 + i)] || 0);
    freqBox.appendChild(div);
  }
}

// é–‹å§‹æ¨¡æ“¬ï¼šåˆå§‹åŒ–å­—ä¸²èˆ‡å­—å…¸
function startSimulation() {
  sStr = document.getElementById("inputStr").value;
  myDict = {};
  simPhase = 0;
  simIndex = 0;
  // çµ±è¨ˆéšæ®µåˆå§‹åŒ–: éæ­·å­—ä¸²å‰å…ˆåˆå§‹åŒ–æ‰€æœ‰å­—æ¯ç‚º 0ï¼ˆå¯çœç•¥ï¼Œä½†é¡¯ç¤ºæ›´å®Œæ•´ï¼‰
  for (let i = 0; i < 26; i++) {
    myDict[String.fromCharCode(97 + i)] = 0;
  }
  updateFreqDisplay();
  simOutput.innerText = `é–‹å§‹æ¨¡æ“¬ï¼šçµ±è¨ˆå­—ä¸² "${sStr}" ä¸­çš„å­—ç¬¦é »ç‡`;
  highlightCode(null);
}

// ä¸‹ä¸€æ­¥æ¨¡æ“¬ï¼šä¾æ“šéšæ®µåŸ·è¡Œ
function nextStep() {
  if (simPhase === 0) {
    // çµ±è¨ˆé »ç‡éšæ®µ
    if (simIndex < sStr.length) {
      let ch = sStr[simIndex].toLowerCase();
      myDict[ch] = (myDict[ch] || 0) + 1;
      simOutput.innerText = `çµ±è¨ˆéšæ®µï¼šè™•ç† s[${simIndex}] = "${sStr[simIndex]}"ï¼Œæ›´æ–°é »ç‡`;
      simIndex++;
      updateFreqDisplay();
      highlightCode("count");
    } else {
      simPhase = 1;
      simIndex = 0;
      simOutput.innerText = "çµ±è¨ˆå®Œæˆï¼Œé–‹å§‹æª¢æŸ¥ç¬¬ä¸€å€‹ä¸é‡è¤‡çš„å­—ç¬¦";
      highlightCode("check");
    }
  } else if (simPhase === 1) {
    // æª¢æŸ¥éšæ®µï¼šéæ­·å­—ä¸²æ‰¾ç¬¬ä¸€å€‹é »ç‡ç‚º 1 çš„å­—ç¬¦
    if (simIndex < sStr.length) {
      let ch = sStr[simIndex].toLowerCase();
      if (myDict[ch] === 1) {
        simOutput.innerText = `æ‰¾åˆ°ç¬¬ä¸€å€‹ä¸é‡è¤‡å­—ç¬¦ï¼šs[${simIndex}] = "${sStr[simIndex]}"`;
        highlightCode("found");
      } else {
        simOutput.innerText = `s[${simIndex}] = "${sStr[simIndex]}" é‡è¤‡å‡ºç¾ï¼Œç¹¼çºŒå°‹æ‰¾`;
        simIndex++;
        highlightCode("check");
      }
    } else {
      simOutput.innerText = "æœªæ‰¾åˆ°ä¸é‡è¤‡å­—ç¬¦ï¼Œå›å‚³ -1";
      highlightCode("return");
    }
  }
}

function highlightCode(context) {
  const codeBox = document.getElementById("codeBox");
  const lines = codeBox.innerText.split("\n");
  let newHTML = "";
  for (let i = 0; i < lines.length; i++) {
    let line = lines[i];
    let id = "";
    if (context === "count" && line.includes("if char in my_dict:")) {
      id = 'id="hl"';
    } else if (context === "check" && line.includes("for index, char in enumerate(s):")) {
      id = 'id="hl"';
    } else if (context === "found" && line.includes("if my_dict[char] == 1:")) {
      id = 'id="hl"';
    } else if (context === "return" && line.includes("return -1")) {
      id = 'id="hl"';
    }
    newHTML += `<div class="code-line" ${id}>${line}</div>`;
  }
  codeBox.innerHTML = newHTML;
}
</script>

</body>
</html>
