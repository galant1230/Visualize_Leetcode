<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“Œ Encode and Decode Strings è¦–è¦ºåŒ– Dashboard</title>
  <style>
    :root {
      --primary: #007acc; --success: #2ecc71; --warning: #f39c12;
      --danger: #e74c3c; --dark: #2c3e50; --bg: #f4f7f9;
    }
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 20px; color: var(--dark); }
    .dashboard { max-width: 1100px; margin: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .full-width { grid-column: span 2; }
    h2 { margin-top: 0; color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; font-size: 1.25rem; }
    
    /* é¡Œç›®è³‡è¨Š */
    .problem-header { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; }
    .example-box { background: #f8f9fa; padding: 12px; border-left: 4px solid var(--warning); font-family: monospace; font-size: 0.9rem; }

    /* æ§åˆ¶é¢æ¿ */
    .controls { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; align-items: center; flex-wrap: wrap; }
    select, input { padding: 8px 15px; border: 2px solid #ddd; border-radius: 25px; outline: none; }
    button { padding: 8px 25px; border: none; border-radius: 25px; cursor: pointer; background: var(--primary); color: white; font-weight: bold; }
    button:disabled { background: #ccc; }

    /* è¦–è¦ºåŒ–å€åŸŸ */
    .viz-container { min-height: 120px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #fff; border: 1px dashed #ccc; border-radius: 8px; padding: 20px; }
    .char-strip { display: flex; gap: 4px; font-family: 'Consolas', monospace; font-size: 1.4rem; }
    .char-unit { 
      width: 40px; height: 50px; border-bottom: 3px solid #ddd; 
      display: flex; align-items: center; justify-content: center; position: relative; 
    }
    .ptr { position: absolute; font-size: 0.75rem; font-weight: bold; top: 55px; }
    .ptr-i { color: var(--danger); }
    .ptr-j { color: var(--primary); top: 75px; }
    .highlight-chunk { background: #d4edda; border-bottom-color: var(--success); }

    /* ä»£ç¢¼è¦–çª— */
    .code-window { background: #282c34; color: #abb2bf; padding: 15px; border-radius: 8px; font-family: 'Consolas', monospace; font-size: 0.85rem; line-height: 1.6; min-height: 300px; }
    .line { padding: 2px 10px; border-radius: 4px; border-left: 4px solid transparent; white-space: pre; }
    .line.active { background: #3e4451; border-left-color: var(--success); color: white; }

    .status-msg { font-weight: bold; color: var(--primary); text-align: center; margin-bottom: 15px; height: 1.2rem; }
  </style>
</head>
<body>

<div class="dashboard">
  <div class="card full-width">
    <h2>ğŸ“Œ Encode and Decode Strings (ç³»çµ±è¨­è¨ˆåŸºç¤)</h2>
    <div class="problem-header">
      <div>
        <p>è¨­è¨ˆä¸€å€‹æ¼”ç®—æ³•ï¼Œå°‡å­—ä¸²åˆ—è¡¨è½‰æ›ç‚ºå–®ä¸€å­—ä¸²ï¼ˆEncodeï¼‰ï¼Œä¸¦èƒ½æº–ç¢ºé‚„åŸï¼ˆDecodeï¼‰ã€‚</p>
        <p><strong>é—œéµæŠ€å·§ï¼š</strong> ä½¿ç”¨ <code>é•·åº¦ + "#"</code> ä½œç‚ºå‰ç¶´ï¼Œç²¾ç¢ºå®šä½æ¯å€‹å­—ä¸²çš„é‚Šç•Œã€‚</p>
      </div>
      <div class="example-box">
        Input: ["neet", "code"]<br>
        Encoded: "4#neet4#code"<br>
        Output: ["neet", "code"]
      </div>
    </div>
  </div>

  <div class="card full-width" style="background: transparent; box-shadow: none; padding: 0;">
    <div class="controls">
      é¸æ“‡æ“ä½œï¼š
      <select id="modeSelect" onchange="initSim()">
        <option value="encode">ğŸ”¹ Encode (ç·¨ç¢¼)</option>
        <option value="decode">ğŸ”¸ Decode (è§£ç¢¼)</option>
      </select>
      è¼¸å…¥: <input type="text" id="inputData" value="neet, code, love" style="width: 250px;">
      <button onclick="initSim()">é‡ç½®</button>
      <button id="nextBtn" onclick="runStep()">ä¸‹ä¸€æ­¥ (Step)</button>
    </div>
  </div>

  <div class="card full-width">
    <div class="status-msg" id="statusMsg">æº–å‚™å°±ç·’</div>
    <div class="viz-container" id="vizArea"></div>
    <div id="resultDisplay" style="margin-top:20px; text-align:center; font-family: monospace; font-weight:bold;"></div>
  </div>

  <div class="card">
    <h2 id="codeTitle">Python å¯¦ä½œ</h2>
    <div class="code-window" id="codeDisplay"></div>
  </div>

  <div class="card">
    <h2>ğŸ’¡ æ ¸å¿ƒç­†è¨˜</h2>
    <ul id="noteList" style="font-size: 0.9rem; line-height: 1.8;"></ul>
  </div>
</div>

<script>
const configs = {
  encode: {
    title: "Encode å¯¦ä½œ",
    code: [
      "def encode(self, strs):",
      "    res = \"\"",
      "    for s in strs:",
      "        res += str(len(s)) + \"#\" + s",
      "    return res"
    ],
    notes: [
      "æ¯å€‹å­—ä¸²å‰åŠ ä¸Šé•·åº¦èˆ‡ # åˆ†éš”ç¬¦ã€‚",
      "æ™‚é–“è¤‡é›œåº¦ O(N)ï¼ŒN ç‚ºç¸½å­—å…ƒæ•¸ã€‚",
      "é€™ç¢ºä¿äº†å³ä½¿å…§å®¹æœ‰ # ä¹Ÿä¸æœƒæ··æ·†ã€‚"
    ]
  },
  decode: {
    title: "Decode å¯¦ä½œ",
    code: [
      "def decode(self, s):",
      "    res, i = [], 0",
      "    while i < len(s):",
      "        j = i",
      "        while s[j] != \"#\":",
      "            j += 1",
      "        length = int(s[i:j])",
      "        res.append(s[j + 1 : j + 1 + length])",
      "        i = j + 1 + length",
      "    return res"
    ],
    notes: [
      "i æŒ‡å‘é•·åº¦æ•¸å­—çš„é–‹é ­ã€‚",
      "j è² è²¬è·‘å»å‰é¢æ‰¾ç¬¬ä¸€å€‹å‡ºç¾çš„ #ã€‚",
      "int(s[i:j]) å–å¾—é•·åº¦ï¼Œç„¶å¾Œç›´æ¥ã€åˆ‡ç‰‡ã€æŠ“å–å­—ä¸²ã€‚"
    ]
  }
};

let i = 0, j = 0, currentData = "", mode = "encode", stepIdx = 0, listData = [];

function initSim() {
  mode = document.getElementById('modeSelect').value;
  const rawInput = document.getElementById('inputData').value;
  const cfg = configs[mode];
  
  // æ›´æ–°ä»‹é¢
  document.getElementById('codeTitle').innerText = cfg.title;
  document.getElementById('codeDisplay').innerHTML = cfg.code.map((l, idx) => `<div class="line" id="l${idx}">${l}</div>`).join('');
  document.getElementById('noteList').innerHTML = cfg.notes.map(n => `<li>${n}</li>`).join('');
  document.getElementById('nextBtn').disabled = false;
  document.getElementById('resultDisplay').innerText = "";
  
  // åˆå§‹åŒ–æ•¸æ“š
  if (mode === 'encode') {
    listData = rawInput.split(',').map(s => s.trim());
    currentData = "";
    stepIdx = 0;
    document.getElementById('statusMsg').innerText = "é»æ“Šä¸‹ä¸€æ­¥é–‹å§‹ç·¨ç¢¼å­—ä¸²åˆ—è¡¨";
  } else {
    // å‡è¨­è¼¸å…¥å·²ç¶“æ˜¯ç·¨ç¢¼éçš„ï¼Œè‹¥ä¸æ˜¯å‰‡è‡ªå‹•å¹«ä»–ç·¨ä¸€å€‹
    if (!rawInput.includes('#')) {
      listData = rawInput.split(',').map(s => s.trim());
      currentData = listData.map(s => s.length + "#" + s).join('');
    } else {
      currentData = rawInput.replace(/\s/g, '');
    }
    i = 0; j = 0; stepIdx = 0;
    document.getElementById('statusMsg').innerText = "é›™æŒ‡é‡æº–å‚™è§£ç¢¼å­—ä¸²";
  }
  render();
}

function render() {
  const area = document.getElementById('vizArea');
  if (mode === 'encode') {
    area.innerHTML = `<div class="char-strip">${listData.map((s, idx) => 
      `<div style="padding: 5px 10px; border: 2px solid ${idx === stepIdx ? 'var(--warning)' : '#eee'}; border-radius: 4px; margin: 0 5px;">${s}</div>`
    ).join(' â” ')}</div>`;
  } else {
    area.innerHTML = `<div class="char-strip">${currentData.split('').map((char, idx) => `
      <div class="char-unit" id="c${idx}">
        ${char}
        ${idx === i ? '<div class="ptr ptr-i">i</div>' : ''}
        ${idx === j ? '<div class="ptr ptr-j">j</div>' : ''}
      </div>
    `).join('')}</div>`;
  }
}

function runStep() {
  clearHighlight();
  const msg = document.getElementById('statusMsg');
  
  if (mode === 'encode') {
    if (stepIdx < listData.length) {
      highlight(2); highlight(3);
      const word = listData[stepIdx];
      const encodedPart = word.length + "#" + word;
      currentData += encodedPart;
      msg.innerText = `ç·¨ç¢¼ "${word}" â” "${encodedPart}"`;
      document.getElementById('resultDisplay').innerText = "ç›®å‰çµæœ: " + currentData;
      stepIdx++;
      render();
    } else {
      highlight(4);
      msg.innerText = "ç·¨ç¢¼å®Œæˆï¼";
      document.getElementById('nextBtn').disabled = true;
    }
  } else {
    // Decode Step
    if (i < currentData.length) {
      if (currentData[j] !== "#") {
        highlight(3); highlight(4); highlight(5);
        j++;
        msg.innerText = `j å°‹æ‰¾ '#'... (ç´¢å¼• ${j})`;
      } else if (stepIdx === 0) { // å‰›æ‰¾åˆ° #
        highlight(6);
        const len = parseInt(currentData.substring(i, j));
        msg.innerText = `æ‰¾åˆ° '#'ï¼é•·åº¦ç‚º ${len}`;
        stepIdx = 1;
      } else { // åŸ·è¡Œåˆ‡ç‰‡
        highlight(7); highlight(8);
        const len = parseInt(currentData.substring(i, j));
        const word = currentData.substring(j + 1, j + 1 + len);
        // é«˜äº®é¡¯ç¤ºåˆ‡å‡ºçš„éƒ¨åˆ†
        for(let k=j+1; k < j+1+len; k++) document.getElementById(`c${k}`).classList.add('highlight-chunk');
        msg.innerText = `æˆªå–å–®å­—: "${word}"`;
        i = j + 1 + len;
        j = i;
        stepIdx = 0;
      }
      render();
    } else {
      highlight(9);
      msg.innerText = "è§£ç¢¼å®Œæˆï¼";
      document.getElementById('nextBtn').disabled = true;
    }
  }
}

function highlight(id) { document.getElementById('l' + id).classList.add('active'); }
function clearHighlight() { document.querySelectorAll('.line').forEach(l => l.classList.remove('active')); }

initSim();
</script>
</body>
</html>
